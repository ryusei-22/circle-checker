<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Circle Checker Pro">
    <title>Circle Checker Pro</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            overscroll-behavior: none;
            touch-action: manipulation;
        }
        canvas { touch-action: none; }
        .touch-none { touch-action: none; }
        
        /* PWAå¯¾å¿œ */
        @media (display-mode: standalone) {
            body { padding-top: env(safe-area-inset-top); }
        }
        
        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .warning-pulse {
            animation: warningPulse 2s infinite;
        }
        
        @keyframes warningPulse {
            0%, 100% { background-color: rgba(239, 68, 68, 0.1); }
            50% { background-color: rgba(239, 68, 68, 0.3); }
        }
        
        .danger-outline {
            border: 3px solid #ef4444;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
        }
        
        .warning-outline {
            border: 3px solid #f59e0b;
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
        }
        
        .safe-outline {
            border: 3px solid #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // å…ƒã®Excelãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ä½¿ç”¨
        const EXCEL_DATA = [
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ†","åç§°":"5Fr","æœ€å¤§å¤–å¾„":1.5},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ†","åç§°":"6Fr","æœ€å¤§å¤–å¾„":1.8},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ†","åç§°":"7Fr","æœ€å¤§å¤–å¾„":2.06},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚«ãƒ†","åç§°":"8Fr","æœ€å¤§å¤–å¾„":2.28},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"EZ Guideã€€5.5Fr ","æœ€å¤§å¤–å¾„":1.3},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"EZ Guideã€€6Fr","æœ€å¤§å¤–å¾„":1.42},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"GUIDE PLUS 5Fr","æœ€å¤§å¤–å¾„":1.19},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"GUIDE PLUS â…¡STã€€ï¼–Fr","æœ€å¤§å¤–å¾„":1.33},
            {"åˆ¤æ–­å††":"è¦ªå††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"HIKYAKU","æœ€å¤§å¤–å¾„":1.48},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"Ryureiã€1.00-1.50mmã€‘","æœ€å¤§å¤–å¾„":0.89,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.64},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"Ryureiã€2.00-4.00mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.64},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"ZINRAIã€0.75-1.00mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.65},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"ZINRAIã€1.50-2.50mmã€‘","æœ€å¤§å¤–å¾„":0.84,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.6},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"Regnamã€2.00-3.00mmã€‘","æœ€å¤§å¤–å¾„":0.83,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"Euphoraã€1.5-3.00mmã€‘","æœ€å¤§å¤–å¾„":0.84,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"MINI TREKã€2.00mmã€‘","æœ€å¤§å¤–å¾„":0.76,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•","åç§°":"TREKã€2.50-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.81,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"NC Kamuiã€2.50-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.83,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"NC Kamuiã€3.75-4.50mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Powered3 NCã€2.50mmã€‘","æœ€å¤§å¤–å¾„":0.81,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69,"å‚™è€ƒ":"é©å¿œGC :6Fr  ãƒ‡ãƒ•ãƒ¬æ™‚ã€ä¸Šæ‰‹ãç•³ã¾ã‚Œãªã„ã¨5Frã ã¨æŠœã‘ãªã„å¯èƒ½æ€§ã‚ã‚Š"},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Powered3 NCã€2.75-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.83,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69,"å‚™è€ƒ":"é©å¿œGC :6Fr  ãƒ‡ãƒ•ãƒ¬æ™‚ã€ä¸Šæ‰‹ãç•³ã¾ã‚Œãªã„ã¨5Frã ã¨æŠœã‘ãªã„å¯èƒ½æ€§ã‚ã‚Š"},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Powered3 NCã€3.75-4.00mmã€‘","æœ€å¤§å¤–å¾„":0.86,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69,"å‚™è€ƒ":"é©å¿œGC :6Fr  ãƒ‡ãƒ•ãƒ¬æ™‚ã€ä¸Šæ‰‹ãç•³ã¾ã‚Œãªã„ã¨5Frã ã¨æŠœã‘ãªã„å¯èƒ½æ€§ã‚ã‚Š"},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Hiryu Plusã€2.00-4.00mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.64},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Hiryu Plusã€4.00-5.00mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.64,"å‚™è€ƒ":"é©å¿œGC :6Fr  GC/MID(mm): 1.78 "},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Hiryu IBã€1.25mmã€‘","æœ€å¤§å¤–å¾„":0.87,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.64},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"Sequent Please NEO ã€2.00-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.83,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.63,"å‚™è€ƒ":"â€»ãƒãƒ«ãƒ¼ãƒ³ã¯5Frå¯¾å¿œã ãŒã€drugãŒå‰¥ãŒã‚Œã‚‹ãŠãã‚ŒãŒã‚ã‚‹ãŸã‚ã€GC/MID(mm):1.65ã‚’å¤§ããã—ã¦ã„ã‚‹"},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"Aperta NSEã€2.00-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.86,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.68},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"kIZASHIã€2.0-3.00mmã€‘","æœ€å¤§å¤–å¾„":0.99,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"kIZASHIã€3.50-mmã€‘","æœ€å¤§å¤–å¾„":0.99,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7,"å‚™è€ƒ":"é©å¿œGC :6Fr  GC/MID(mm): 1.78 "},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"Wolverineã€2.00-3.00mmã€‘","æœ€å¤§å¤–å¾„":0.91,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.59},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Ace HPã€2.50-3.00mmã€‘","æœ€å¤§å¤–å¾„":0.8,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.66},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"Ace HPã€3.50-4.00mmã€‘","æœ€å¤§å¤–å¾„":0.86,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.66},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”NCã€•","åç§°":"NC Euphoraã€2.25-3.50mmã€‘","æœ€å¤§å¤–å¾„":0.89,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒãƒ«ãƒ¼ãƒ³ã€”ãã®ä»–ã€•","åç§°":"Ryuseiã€2.50-3.50mmã€‘","æœ€å¤§å¤–å¾„":1.13},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Xience Skypoint-38mmã€2.25-4.0mmã€‘","æœ€å¤§å¤–å¾„":0.93,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.71},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Xience Skypoint-48mmã€2.25-4.0mmã€‘","æœ€å¤§å¤–å¾„":0.93,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.71,"å‚™è€ƒ":"é©å¿œGC :6Fr  GC/MID(mm): 1.78 "},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Resoluteã€2.25-3.5mmã€‘","æœ€å¤§å¤–å¾„":0.91,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.69},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Coroflex ISAR NEOã€2.5-3.5mmã€‘","æœ€å¤§å¤–å¾„":0.83,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.63},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Orsiro Missionã€2.25-3.0mmã€‘","æœ€å¤§å¤–å¾„":0.89,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.66},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"Orsiro Missionã€3.50mmã€‘","æœ€å¤§å¤–å¾„":0.96,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.66},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¹ãƒ†ãƒ³ãƒˆ","åç§°":"BioFreedom Ultraã€2.5-4.0mmã€‘","æœ€å¤§å¤–å¾„":0.86,"ã‚·ãƒ£ãƒ•ãƒˆå¾„":0.7},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Caravel MC","æœ€å¤§å¤–å¾„":0.85},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Zizai","æœ€å¤§å¤–å¾„":0.94},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Mogul SPã€€Thinner","æœ€å¤§å¤–å¾„":0.87},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Mogul SP","æœ€å¤§å¤–å¾„":0.87},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"MITICHIBIKI PLUS","æœ€å¤§å¤–å¾„":0.94},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Fine Cross GT","æœ€å¤§å¤–å¾„":0.87},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"carry Leon UX19","æœ€å¤§å¤–å¾„":0.63},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Corsair Pro","æœ€å¤§å¤–å¾„":0.93},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Corsair Pro XS","æœ€å¤§å¤–å¾„":0.95},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"Crusade type R","æœ€å¤§å¤–å¾„":1.06},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãƒã‚¤ã‚¯ãƒ­ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"SASUKE","æœ€å¤§å¤–å¾„":1.05},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"æœ«æ¢¢ä¿è­·","åç§°":"PARACHUTE","æœ€å¤§å¤–å¾„":0.36},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"æœ«æ¢¢ä¿è­·","åç§°":"FILTRAPâ…¡","æœ€å¤§å¤–å¾„":0.89},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"äº¤æ›ç”¨ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"KUSABI","æœ€å¤§å¤–å¾„":0.68},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"äº¤æ›ç”¨ã‚«ãƒ†ãƒ¼ãƒ†ãƒ«","åç§°":"EZ Keeper","æœ€å¤§å¤–å¾„":0.68},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"FFRãƒ¯ã‚¤ãƒ¤ãƒ¼","åç§°":"Comet â…¡","æœ€å¤§å¤–å¾„":0.36},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"IVUS","åç§°":"OptiCross","æœ€å¤§å¤–å¾„":1.05},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"è¡€æ “å¸å¼•","åç§°":"Thrombusterâ…¡ 6Fr","æœ€å¤§å¤–å¾„":1.3},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"è¡€æ “å¸å¼•","åç§°":"Thrombusterâ…¡ 7Fr","æœ€å¤§å¤–å¾„":1.52},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"è¡€æ “å¸å¼•","åç§°":"Thrombusterâ…¡ 8Fr","æœ€å¤§å¤–å¾„":1.74},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ãã®ä»–","åç§°":"Snare Kit","æœ€å¤§å¤–å¾„":1.35},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ãƒ¯ã‚¤ãƒ¤ãƒ¼","åç§°":"1.4Wire","æœ€å¤§å¤–å¾„":0.36},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ãƒ¯ã‚¤ãƒ¤ãƒ¼","åç§°":"RGï¼“","æœ€å¤§å¤–å¾„":0.26},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"EZ Guideã€€5.5Fr ","æœ€å¤§å¤–å¾„":1.3},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"EZ Guideã€€6Fr","æœ€å¤§å¤–å¾„":1.42},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"GUIDE PLUS 5Fr","æœ€å¤§å¤–å¾„":1.19},
            {"åˆ¤æ–­å††":"å­å††","ã‚¿ã‚¤ãƒ—":"ã‚¬ã‚¤ãƒ‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³","åç§°":"GUIDE PLUS â…¡STã€€ï¼–Fr","æœ€å¤§å¤–å¾„":1.33}
        ];

        // è¨­å®š - å®Ÿéš›ã®ã‚µã‚¤ã‚ºã‚’æ­£ç¢ºã«åæ˜ 
        const SCALE_FACTOR = 140;
        const CANVAS_SIZE = 380;
        const MIN_CHILD_RADIUS = 5;   // æœ€å°å€¤ã‚’å¤§å¹…ã«ç¸®å°ï¼ˆå®Ÿéš›ã®ã‚µã‚¤ã‚ºå„ªå…ˆï¼‰
        const MAX_CHILD_RADIUS = 200; // æœ€å¤§å€¤ã‚’å¤§å¹…ã«æ‹¡å¤§ï¼ˆå®Ÿéš›ã®ã‚µã‚¤ã‚ºå„ªå…ˆï¼‰
        
        // ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹è¨­å®š
        const CLEARANCE_SETTINGS = {
            SAFE: 0.15,     // å®‰å…¨ï¼ˆç·‘ï¼‰
            WARNING: 0.05,  // æ³¨æ„ï¼ˆé»„ï¼‰
            DANGER: 0.0     // å±é™ºï¼ˆèµ¤ï¼‰
        };

        const CircleCheckerPro = () => {
            const [activeTab, setActiveTab] = useState('setup');
            const [database, setDatabase] = useState(EXCEL_DATA);
            const [parentCircles, setParentCircles] = useState([]);
            const [childCirclesData, setChildCirclesData] = useState([]);
            const [selectedParent, setSelectedParent] = useState(null);
            const [selectedType, setSelectedType] = useState('');
            const [selectedName, setSelectedName] = useState('');
            const [selectedPattern, setSelectedPattern] = useState('pattern1');
            const [childCircles, setChildCircles] = useState([]);
            const [selectedCircleIndex, setSelectedCircleIndex] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [showClearanceInfo, setShowClearanceInfo] = useState(true);
            const canvasRef = useRef(null);

            const [dragState, setDragState] = useState({
                isDragging: false,
                dragIndex: null,
                startPos: { x: 0, y: 0 }
            });

            // ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹è¨ˆç®—é–¢æ•°
            const calculateClearance = (parentDiameter, childDiameter) => {
                return parentDiameter - childDiameter;
            };

            // ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹çŠ¶æ…‹ã‚’åˆ¤å®š
            const getClearanceStatus = (clearance) => {
                if (clearance >= CLEARANCE_SETTINGS.SAFE) return 'SAFE';
                if (clearance >= CLEARANCE_SETTINGS.WARNING) return 'WARNING';
                return 'DANGER';
            };

            // é©åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯
            const checkCompatibility = (parentCircle, childCircle, pattern) => {
                if (!parentCircle || !childCircle) return { status: 'SAFE', clearance: 0, message: '' };
                
                const childSize = pattern === 'pattern1' ? childCircle.æœ€å¤§å¤–å¾„ : (childCircle.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || childCircle.æœ€å¤§å¤–å¾„);
                const clearance = calculateClearance(parentCircle.æœ€å¤§å¤–å¾„, childSize);
                const status = getClearanceStatus(clearance);
                
                let message = '';
                if (status === 'DANGER') {
                    if (clearance <= 0) {
                        message = 'âš ï¸ ç†è«–ä¸ŠæŒ¿å…¥ä¸å¯èƒ½';
                    } else {
                        message = 'âš ï¸ ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ä¸è¶³';
                    }
                } else if (status === 'WARNING') {
                    message = 'âš ï¸ æ³¨æ„ãŒå¿…è¦';
                } else {
                    message = 'âœ… å®‰å…¨';
                }
                
                return { status, clearance, message };
            };

            // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
            useEffect(() => {
                const parents = database.filter(item => item['åˆ¤æ–­å††'] === 'è¦ªå††');
                const children = database.filter(item => item['åˆ¤æ–­å††'] === 'å­å††');
                setParentCircles(parents);
                setChildCirclesData(children);
                
                if (parents.length > 0) {
                    setSelectedParent(parents[0]);
                }
            }, [database]);

            // ã‚­ãƒ£ãƒ³ãƒã‚¹åˆæœŸåŒ–
            useEffect(() => {
                if (canvasRef.current) {
                    canvasRef.current.width = CANVAS_SIZE;
                    canvasRef.current.height = CANVAS_SIZE;
                }
            }, []);

            // ã‚­ãƒ£ãƒ³ãƒã‚¹æç”»
            useEffect(() => {
                if (activeTab === 'canvas') {
                    const timer = setTimeout(() => {
                        drawCanvas();
                    }, 100);
                    return () => clearTimeout(timer);
                }
            }, [activeTab]);

            useEffect(() => {
                drawCanvas();
            }, [selectedParent, childCircles, selectedCircleIndex]);

            const drawCanvas = () => {
                const canvas = canvasRef.current;
                if (!canvas) return;

                if (canvas.width !== CANVAS_SIZE || canvas.height !== CANVAS_SIZE) {
                    canvas.width = CANVAS_SIZE;
                    canvas.height = CANVAS_SIZE;
                }

                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // è¦ªå††æç”»
                if (selectedParent) {
                    const centerX = CANVAS_SIZE / 2;
                    const centerY = CANVAS_SIZE / 2;
                    const radius = Math.min((selectedParent.æœ€å¤§å¤–å¾„ * SCALE_FACTOR) / 2, (CANVAS_SIZE / 2) - 30);

                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                    ctx.strokeStyle = '#8E8E93';
                    ctx.lineWidth = 3;
                    ctx.stroke();
                    
                    // ãƒ©ãƒ™ãƒ«
                    ctx.fillStyle = '#1D1D1F';
                    ctx.font = 'bold 14px -apple-system, BlinkMacSystemFont, sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(`${selectedParent.åç§°} (${selectedParent.æœ€å¤§å¤–å¾„}mm)`, centerX, centerY - radius - 15);
                }

                // å­å††æç”»
                childCircles.forEach((circle, index) => {
                    // å®Ÿéš›ã®ã‚µã‚¤ã‚ºã«åŸºã¥ã„ã¦åŠå¾„ã‚’è¨ˆç®—ï¼ˆåˆ¶é™ã‚’æœ€å°é™ã«ï¼‰
                    const theoreticalRadius = (circle.activeSize * SCALE_FACTOR) / 2;
                    const radius = Math.max(MIN_CHILD_RADIUS, Math.min(theoreticalRadius, MAX_CHILD_RADIUS));
                    
                    // ã‚µã‚¤ã‚ºãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹å ´åˆã®è­¦å‘Š
                    const isSizeAdjusted = theoreticalRadius !== radius;
                    
                    ctx.beginPath();
                    ctx.arc(circle.x, circle.y, radius, 0, Math.PI * 2);

                    // é©åˆæ€§ãƒã‚§ãƒƒã‚¯
                    const compatibility = checkCompatibility(selectedParent, circle, circle.pattern);
                    
                    // é‡ãªã‚Šãƒã‚§ãƒƒã‚¯
                    const centerX = CANVAS_SIZE / 2;
                    const centerY = CANVAS_SIZE / 2;
                    const parentRadius = selectedParent ? Math.min((selectedParent.æœ€å¤§å¤–å¾„ * SCALE_FACTOR) / 2, (CANVAS_SIZE / 2) - 30) : 0;
                    const distanceFromCenter = Math.sqrt((circle.x - centerX) ** 2 + (circle.y - centerY) ** 2);
                    const isOutsideParent = distanceFromCenter + radius > parentRadius;

                    // ä»–ã®å††ã¨ã®é‡ãªã‚Šãƒã‚§ãƒƒã‚¯
                    const hasCircleOverlap = childCircles.some((other, j) => {
                        if (index === j) return false;
                        const otherTheoreticalRadius = (other.activeSize * SCALE_FACTOR) / 2;
                        const otherRadius = Math.max(MIN_CHILD_RADIUS, Math.min(otherTheoreticalRadius, MAX_CHILD_RADIUS));
                        const distance = Math.sqrt((circle.x - other.x) ** 2 + (circle.y - other.y) ** 2);
                        return distance < radius + otherRadius;
                    });

                    // è‰²è¨­å®šï¼ˆé©åˆæ€§ã‚’å„ªå…ˆï¼‰
                    if (isOutsideParent || hasCircleOverlap) {
                        ctx.fillStyle = 'rgba(255, 59, 48, 0.4)';
                    } else if (compatibility.status === 'DANGER') {
                        ctx.fillStyle = 'rgba(255, 59, 48, 0.4)';
                    } else if (compatibility.status === 'WARNING') {
                        ctx.fillStyle = 'rgba(245, 158, 11, 0.4)';
                    } else {
                        ctx.fillStyle = circle.pattern === 'pattern1' ? 'rgba(0, 122, 255, 0.4)' : 'rgba(52, 199, 89, 0.4)';
                    }

                    ctx.fill();
                    
                    // å¢ƒç•Œç·šï¼ˆã‚µã‚¤ã‚ºèª¿æ•´ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ç‚¹ç·šï¼‰
                    if (index === selectedCircleIndex) {
                        ctx.strokeStyle = '#FF3B30';
                        ctx.lineWidth = 4;
                    } else if (compatibility.status === 'DANGER') {
                        ctx.strokeStyle = '#ef4444';
                        ctx.lineWidth = 3;
                    } else if (compatibility.status === 'WARNING') {
                        ctx.strokeStyle = '#f59e0b';
                        ctx.lineWidth = 3;
                    } else {
                        ctx.strokeStyle = '#8E8E93';
                        ctx.lineWidth = 2;
                    }
                    
                    // ã‚µã‚¤ã‚ºèª¿æ•´ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ç‚¹ç·š
                    if (isSizeAdjusted) {
                        ctx.setLineDash([5, 5]);
                    } else {
                        ctx.setLineDash([]);
                    }
                    ctx.stroke();
                    ctx.setLineDash([]); // ãƒªã‚»ãƒƒãƒˆ

                    // ãƒ©ãƒ™ãƒ«ï¼ˆã‚ˆã‚Šå°ã•ãªå††ã§ã‚‚è¡¨ç¤ºï¼‰
                    if (radius > 10) {
                        ctx.fillStyle = '#1D1D1F';
                        ctx.font = `bold ${radius > 30 ? '11' : '9'}px -apple-system, BlinkMacSystemFont, sans-serif`;
                        ctx.textAlign = 'center';
                        const shortName = circle.åç§°.split('ã€')[0].substring(0, radius > 30 ? 8 : 6);
                        ctx.fillText(shortName, circle.x, circle.y + 2);
                        
                        // ã‚µã‚¤ã‚ºè¡¨ç¤º
                        if (radius > 20) {
                            ctx.font = `${radius > 30 ? '8' : '7'}px -apple-system, BlinkMacSystemFont, sans-serif`;
                            ctx.fillText(`${circle.activeSize}mm`, circle.x, circle.y + (radius > 30 ? 12 : 10));
                        }
                        
                        // ã‚µã‚¤ã‚ºèª¿æ•´è­¦å‘Š
                        if (isSizeAdjusted && radius > 25) {
                            ctx.fillStyle = '#ff6b35';
                            ctx.font = '8px -apple-system, BlinkMacSystemFont, sans-serif';
                            ctx.fillText('âš ï¸èª¿æ•´', circle.x, circle.y - radius + 8);
                        }
                    }
                });
            };

            const getTouchPosition = (e, canvas) => {
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                
                return {
                    x: (clientX - rect.left) * (canvas.width / rect.width),
                    y: (clientY - rect.top) * (canvas.height / rect.height)
                };
            };

            const findCircleAtPosition = (x, y) => {
                for (let i = childCircles.length - 1; i >= 0; i--) {
                    const circle = childCircles[i];
                    const dx = x - circle.x;
                    const dy = y - circle.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const radius = Math.max(
                        MIN_CHILD_RADIUS,
                        Math.min((circle.activeSize * SCALE_FACTOR) / 2, MAX_CHILD_RADIUS)
                    );
                    
                    if (distance <= radius + 10) {
                        return i;
                    }
                }
                return null;
            };

            const handleStart = (e) => {
                e.preventDefault();
                const canvas = canvasRef.current;
                if (!canvas) return;

                const pos = getTouchPosition(e, canvas);
                const circleIndex = findCircleAtPosition(pos.x, pos.y);
                
                if (circleIndex !== null) {
                    setSelectedCircleIndex(circleIndex);
                    setDragState({
                        isDragging: false,
                        dragIndex: circleIndex,
                        startPos: pos
                    });
                } else {
                    setSelectedCircleIndex(null);
                }
            };

            const handleMove = (e) => {
                e.preventDefault();
                if (dragState.dragIndex === null) return;

                const canvas = canvasRef.current;
                if (!canvas) return;

                const pos = getTouchPosition(e, canvas);
                const deltaX = pos.x - dragState.startPos.x;
                const deltaY = pos.y - dragState.startPos.y;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

                if (!dragState.isDragging && distance > 3) {
                    setDragState(prev => ({ ...prev, isDragging: true }));
                }

                if (dragState.isDragging) {
                    setChildCircles(prev => prev.map((circle, index) => {
                        if (index !== dragState.dragIndex) return circle;
                        
                        const theoreticalRadius = (circle.activeSize * SCALE_FACTOR) / 2;
                        const radius = Math.max(MIN_CHILD_RADIUS, Math.min(theoreticalRadius, MAX_CHILD_RADIUS));
                        const newX = Math.max(radius, Math.min(CANVAS_SIZE - radius, pos.x));
                        const newY = Math.max(radius, Math.min(CANVAS_SIZE - radius, pos.y));
                        
                        return { ...circle, x: newX, y: newY };
                    }));
                }
            };

            const handleEnd = (e) => {
                e.preventDefault();
                setDragState({
                    isDragging: false,
                    dragIndex: null,
                    startPos: { x: 0, y: 0 }
                });
            };

            const handleAddCircle = () => {
                if (!selectedParent || !selectedName) return;

                const selectedCircle = childCirclesData.find(
                    circle => circle.åç§° === selectedName && circle.ã‚¿ã‚¤ãƒ— === selectedType
                );

                if (!selectedCircle) return;

                // é©åˆæ€§ãƒã‚§ãƒƒã‚¯
                const compatibility = checkCompatibility(selectedParent, selectedCircle, selectedPattern);
                
                const diameter = selectedPattern === 'pattern1' ? selectedCircle.æœ€å¤§å¤–å¾„ : (selectedCircle.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || selectedCircle.æœ€å¤§å¤–å¾„);
                
                const newCircle = {
                    ...selectedCircle,
                    x: CANVAS_SIZE / 2,
                    y: CANVAS_SIZE / 2,
                    pattern: selectedPattern,
                    activeSize: diameter,
                    compatibility: compatibility
                };
                
                setChildCircles(prev => [...prev, newCircle]);
                setSelectedCircleIndex(childCircles.length);
                setActiveTab('canvas');
            };

            const removeCircle = (index) => {
                setChildCircles(prev => prev.filter((_, i) => i !== index));
                if (selectedCircleIndex === index) {
                    setSelectedCircleIndex(null);
                } else if (selectedCircleIndex > index) {
                    setSelectedCircleIndex(prev => prev - 1);
                }
            };

            const togglePattern = () => {
                if (selectedCircleIndex === null) return;
                
                setChildCircles(prev => prev.map((circle, index) => {
                    if (index !== selectedCircleIndex) return circle;
                    
                    const newPattern = circle.pattern === 'pattern1' ? 'pattern2' : 'pattern1';
                    const newActiveSize = newPattern === 'pattern1' ? circle.æœ€å¤§å¤–å¾„ : (circle.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || circle.æœ€å¤§å¤–å¾„);
                    const newCompatibility = checkCompatibility(selectedParent, circle, newPattern);
                    
                    return {
                        ...circle,
                        pattern: newPattern,
                        activeSize: newActiveSize,
                        compatibility: newCompatibility
                    };
                }));
            };

            const exportData = () => {
                const dataStr = JSON.stringify(database, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'pci_database.json';
                link.click();
                URL.revokeObjectURL(url);
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const jsonData = JSON.parse(e.target.result);
                            setDatabase(jsonData);
                            alert('ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸï¼');
                        } catch (error) {
                            alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            };

            const uniqueTypes = [...new Set(childCirclesData.map(circle => circle.ã‚¿ã‚¤ãƒ—))];
            const filteredByType = childCirclesData.filter(circle => circle.ã‚¿ã‚¤ãƒ— === selectedType);
            const selectedCircle = selectedCircleIndex !== null ? childCircles[selectedCircleIndex] : null;

            // æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            const filteredDatabase = database.filter(item => 
                item.åç§°.toLowerCase().includes(searchTerm.toLowerCase()) ||
                item.ã‚¿ã‚¤ãƒ—.toLowerCase().includes(searchTerm.toLowerCase())
            );

            // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹å­å††ã®é©åˆæ€§
            const currentCompatibility = selectedName ? 
                checkCompatibility(
                    selectedParent, 
                    filteredByType.find(c => c.åç§° === selectedName),
                    selectedPattern
                ) : null;

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                    <header className="bg-white border-b border-gray-200 sticky top-0 z-50">
                        <div className="max-w-md mx-auto px-4 py-4">
                            <div className="flex items-center justify-between mb-4">
                                <h1 className="text-2xl font-semibold text-gray-900">Circle Checker Pro</h1>
                                <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                    <span className="text-white text-sm font-medium">â—¯</span>
                                </div>
                            </div>
                            
                            {/* ã‚¿ãƒ– */}
                            <div className="flex bg-gray-100 rounded-lg p-1">
                                {[
                                    { id: 'setup', label: 'è¨­å®š', icon: 'âš™ï¸' },
                                    { id: 'canvas', label: 'é…ç½®', icon: 'ğŸ¯' },
                                    { id: 'list', label: 'ä¸€è¦§', icon: 'ğŸ“‹' },
                                    { id: 'database', label: 'DB', icon: 'ğŸ—„ï¸' }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ${
                                            activeTab === tab.id
                                                ? 'bg-white text-blue-600 shadow-sm'
                                                : 'text-gray-600 hover:text-gray-900'
                                        }`}
                                    >
                                        <div className="flex flex-col items-center space-y-1">
                                            <span>{tab.icon}</span>
                                            <span>{tab.label}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </header>

                    <main className="max-w-md mx-auto px-4 py-6">
                        {/* ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹æƒ…å ±è¡¨ç¤º */}
                        {showClearanceInfo && (
                            <div className="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
                                <div className="flex items-center justify-between mb-3">
                                    <h3 className="font-semibold text-blue-900">ğŸ“ è¡¨ç¤ºã«ã¤ã„ã¦</h3>
                                    <button
                                        onClick={() => setShowClearanceInfo(false)}
                                        className="text-blue-600 hover:text-blue-800"
                                    >
                                        âœ•
                                    </button>
                                </div>
                                <div className="space-y-2 text-sm">
                                    <div className="bg-green-100 p-2 rounded">
                                        <p className="font-medium text-green-800">âœ… å®Ÿéš›ã®ã‚µã‚¤ã‚ºã§è¡¨ç¤º</p>
                                        <p className="text-green-700">å­å††ã‚‚å®Ÿéš›ã®mmæ•°ã«åŸºã¥ã„ã¦ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</p>
                                    </div>
                                    <div className="space-y-1 text-xs">
                                        <p><span className="inline-block w-3 h-3 bg-green-500 rounded-full mr-2"></span>â‰¥0.15mmï¼šå®‰å…¨</p>
                                        <p><span className="inline-block w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>0.05-0.15mmï¼šæ³¨æ„</p>
                                        <p><span className="inline-block w-3 h-3 bg-red-500 rounded-full mr-2"></span>&lt;0.05mmï¼šå±é™º</p>
                                        <p><span class="inline-block w-3 h-1 border-dashed border-gray-500 mr-2"></span>ç‚¹ç·šï¼šã‚µã‚¤ã‚ºèª¿æ•´ã‚ã‚Š</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* è¨­å®šã‚¿ãƒ– */}
                        {activeTab === 'setup' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <h2 className="text-lg font-semibold text-gray-900 mb-4">å††ã®è¨­å®š</h2>
                                    
                                    <div className="space-y-4">
                                        {/* è¦ªå††é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">è¦ªå††</label>
                                            <select
                                                value={selectedParent?.åç§° || ''}
                                                onChange={(e) => {
                                                    const parent = parentCircles.find(p => p.åç§° === e.target.value);
                                                    setSelectedParent(parent);
                                                }}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {parentCircles.map((circle, index) => (
                                                    <option key={index} value={circle.åç§°}>
                                                        {circle.ã‚¿ã‚¤ãƒ—} - {circle.åç§°} ({circle.æœ€å¤§å¤–å¾„}mm)
                                                    </option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* ã‚¿ã‚¤ãƒ—é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ã‚¿ã‚¤ãƒ—</label>
                                            <select
                                                value={selectedType}
                                                onChange={(e) => {
                                                    setSelectedType(e.target.value);
                                                    setSelectedName('');
                                                }}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {uniqueTypes.map((type, index) => (
                                                    <option key={index} value={type}>{type}</option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* åç§°é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">åç§°</label>
                                            <select
                                                value={selectedName}
                                                onChange={(e) => setSelectedName(e.target.value)}
                                                disabled={!selectedType}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {filteredByType.map((circle, index) => (
                                                    <option key={index} value={circle.åç§°}>
                                                        {circle.åç§°}
                                                    </option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* é¸æŠã•ã‚ŒãŸå††ã®è©³ç´°æƒ…å ± */}
                                        {selectedName && (() => {
                                            const selectedDetail = filteredByType.find(c => c.åç§° === selectedName);
                                            return (
                                                <div className="bg-blue-50 rounded-lg p-4">
                                                    <h4 className="font-medium text-blue-900 mb-2">è©³ç´°æƒ…å ±</h4>
                                                    <div className="text-sm text-blue-800 space-y-1">
                                                        <p>æœ€å¤§å¤–å¾„: {selectedDetail?.æœ€å¤§å¤–å¾„}mm</p>
                                                        {selectedDetail?.ã‚·ãƒ£ãƒ•ãƒˆå¾„ && (
                                                            <p>ã‚·ãƒ£ãƒ•ãƒˆå¾„: {selectedDetail.ã‚·ãƒ£ãƒ•ãƒˆå¾„}mm</p>
                                                        )}
                                                        {selectedDetail?.å‚™è€ƒ && (
                                                            <p className="text-xs bg-yellow-100 text-yellow-800 p-2 rounded mt-2">
                                                                ğŸ’¡ {selectedDetail.å‚™è€ƒ}
                                                            </p>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })()}

                                        {/* ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ */}
                                        {selectedName && (
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">ç›´å¾„ãƒ‘ã‚¿ãƒ¼ãƒ³</label>
                                                <div className="flex space-x-3">
                                                    <label className="flex-1">
                                                        <input
                                                            type="radio"
                                                            name="pattern"
                                                            value="pattern1"
                                                            checked={selectedPattern === 'pattern1'}
                                                            onChange={(e) => setSelectedPattern(e.target.value)}
                                                            className="sr-only"
                                                        />
                                                        <div className={`p-4 border-2 rounded-lg text-center cursor-pointer transition-all ${
                                                            selectedPattern === 'pattern1'
                                                                ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                                : 'border-gray-300 text-gray-700 hover:border-gray-400'
                                                        }`}>
                                                            <div className="text-xl mb-2">ğŸ”µ</div>
                                                            <div className="text-sm font-medium">æœ€å¤§å¤–å¾„</div>
                                                        </div>
                                                    </label>
                                                    <label className="flex-1">
                                                        <input
                                                            type="radio"
                                                            name="pattern"
                                                            value="pattern2"
                                                            checked={selectedPattern === 'pattern2'}
                                                            onChange={(e) => setSelectedPattern(e.target.value)}
                                                            className="sr-only"
                                                        />
                                                        <div className={`p-4 border-2 rounded-lg text-center cursor-pointer transition-all ${
                                                            selectedPattern === 'pattern2'
                                                                ? 'border-green-500 bg-green-50 text-green-700'
                                                                : 'border-gray-300 text-gray-700 hover:border-gray-400'
                                                        }`}>
                                                            <div className="text-xl mb-2">ğŸŸ¢</div>
                                                            <div className="text-sm font-medium">ã‚·ãƒ£ãƒ•ãƒˆå¾„</div>
                                                        </div>
                                                    </label>
                                                </div>
                                            </div>
                                        )}

                                        {/* é©åˆæ€§ãƒã‚§ãƒƒã‚¯çµæœ */}
                                        {currentCompatibility && (
                                            <div className={`rounded-lg p-4 ${
                                                currentCompatibility.status === 'DANGER' ? 'bg-red-50 border border-red-200' :
                                                currentCompatibility.status === 'WARNING' ? 'bg-yellow-50 border border-yellow-200' :
                                                'bg-green-50 border border-green-200'
                                            }`}>
                                                <div className="flex items-center space-x-2 mb-2">
                                                    <span className="text-lg">
                                                        {currentCompatibility.status === 'DANGER' ? 'âš ï¸' :
                                                         currentCompatibility.status === 'WARNING' ? 'âš ï¸' : 'âœ…'}
                                                    </span>
                                                    <span className={`font-medium ${
                                                        currentCompatibility.status === 'DANGER' ? 'text-red-800' :
                                                        currentCompatibility.status === 'WARNING' ? 'text-yellow-800' :
                                                        'text-green-800'
                                                    }`}>
                                                        {currentCompatibility.message}
                                                    </span>
                                                </div>
                                                <p className={`text-sm ${
                                                    currentCompatibility.status === 'DANGER' ? 'text-red-700' :
                                                    currentCompatibility.status === 'WARNING' ? 'text-yellow-700' :
                                                    'text-green-700'
                                                }`}>
                                                    ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹: {currentCompatibility.clearance.toFixed(2)}mm
                                                </p>
                                                {currentCompatibility.status === 'DANGER' && currentCompatibility.clearance <= 0 && (
                                                    <p className="text-xs text-red-600 mt-2 bg-red-100 p-2 rounded">
                                                        ğŸš¨ ã“ã®ã‚µã‚¤ã‚ºã§ã¯ç‰©ç†çš„ã«æŒ¿å…¥ã§ãã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèªãŒå¿…è¦ã§ã™ã€‚
                                                    </p>
                                                )}
                                            </div>
                                        )}

                                        <button
                                            onClick={handleAddCircle}
                                            disabled={!selectedParent || !selectedName}
                                            className={`w-full py-4 px-4 rounded-lg font-medium text-lg transition-colors ${
                                                currentCompatibility?.status === 'DANGER' 
                                                    ? 'bg-red-500 hover:bg-red-600 text-white'
                                                    : currentCompatibility?.status === 'WARNING'
                                                    ? 'bg-yellow-500 hover:bg-yellow-600 text-white'
                                                    : 'bg-blue-500 hover:bg-blue-600 text-white'
                                            } disabled:bg-gray-300 disabled:cursor-not-allowed`}
                                        >
                                            {currentCompatibility?.status === 'DANGER' ? 'âš ï¸ å±é™ºã ãŒè¿½åŠ ' :
                                             currentCompatibility?.status === 'WARNING' ? 'âš ï¸ æ³¨æ„ã—ã¦è¿½åŠ ' :
                                             'å††ã‚’è¿½åŠ '}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* é…ç½®ã‚¿ãƒ– */}
                        {activeTab === 'canvas' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-lg font-semibold text-gray-900">é…ç½®å›³</h2>
                                        {childCircles.length > 0 && (
                                            <span className="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
                                                {childCircles.length}å€‹
                                            </span>
                                        )}
                                    </div>
                                    
                                    <div className="flex justify-center mb-4">
                                        <canvas
                                            ref={canvasRef}
                                            onTouchStart={handleStart}
                                            onTouchMove={handleMove}
                                            onTouchEnd={handleEnd}
                                            onMouseDown={handleStart}
                                            onMouseMove={handleMove}
                                            onMouseUp={handleEnd}
                                            onMouseLeave={handleEnd}
                                            className="border border-gray-200 rounded-lg bg-white cursor-pointer touch-none"
                                            style={{ maxWidth: '100%', height: 'auto' }}
                                        />
                                    </div>

                                    {childCircles.length === 0 && (
                                        <div className="text-center py-8">
                                            <div className="text-4xl mb-2">â­•</div>
                                            <p className="text-gray-500 text-sm mb-2">è¨­å®šã‚¿ãƒ–ã§å††ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>
                                            <p className="text-gray-400 text-xs">å††ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠãƒ»ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•</p>
                                            <div className="mt-4 p-3 bg-green-50 rounded-lg text-xs text-green-800">
                                                ğŸ’¡ ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯å­å††ã‚‚å®Ÿéš›ã®ã‚µã‚¤ã‚ºã§è¡¨ç¤ºã•ã‚Œã¾ã™
                                            </div>
                                        </div>
                                    )}
                                </div>

                                {/* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */}
                                {selectedCircle && (
                                    <div className="bg-white rounded-xl p-6 shadow-sm">
                                        <h3 className="text-lg font-semibold text-gray-900 mb-4">é¸æŠä¸­ã®å††</h3>
                                        <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                            <p className="font-medium text-gray-900">{selectedCircle.åç§°.split('ã€')[0]}</p>
                                            <p className="text-sm text-gray-600">
                                                {selectedCircle.pattern === 'pattern1' ? 'æœ€å¤§å¤–å¾„' : 'ã‚·ãƒ£ãƒ•ãƒˆå¾„'}: {selectedCircle.activeSize}mm
                                            </p>
                                            
                                            {/* é©åˆæ€§è¡¨ç¤º */}
                                            {(() => {
                                                const compatibility = checkCompatibility(selectedParent, selectedCircle, selectedCircle.pattern);
                                                return (
                                                    <div className={`mt-2 p-2 rounded text-xs ${
                                                        compatibility.status === 'DANGER' ? 'bg-red-100 text-red-800' :
                                                        compatibility.status === 'WARNING' ? 'bg-yellow-100 text-yellow-800' :
                                                        'bg-green-100 text-green-800'
                                                    }`}>
                                                        {compatibility.message} (ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹: {compatibility.clearance.toFixed(2)}mm)
                                                    </div>
                                                );
                                            })()}
                                            
                                            {selectedCircle.å‚™è€ƒ && (
                                                <p className="text-xs text-yellow-700 bg-yellow-100 p-2 rounded mt-2">
                                                    ğŸ’¡ {selectedCircle.å‚™è€ƒ}
                                                </p>
                                            )}
                                        </div>

                                        <div className="flex space-x-3">
                                            <button 
                                                onClick={togglePattern} 
                                                className="flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 py-4 px-4 rounded-lg font-medium transition-colors"
                                            >
                                                ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ‡æ›¿
                                            </button>
                                            <button
                                                onClick={() => removeCircle(selectedCircleIndex)}
                                                className="bg-red-500 hover:bg-red-600 text-white py-4 px-4 rounded-lg font-medium transition-colors"
                                            >
                                                å‰Šé™¤
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* ä¸€è¦§ã‚¿ãƒ– */}
                        {activeTab === 'list' && (
                            <div className="space-y-4">
                                <div className="flex items-center justify-between">
                                    <h2 className="text-lg font-semibold text-gray-900">é…ç½®æ¸ˆã¿å††ä¸€è¦§</h2>
                                    {childCircles.length > 0 && (
                                        <span className="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
                                            {childCircles.length}å€‹
                                        </span>
                                    )}
                                </div>

                                {childCircles.length === 0 ? (
                                    <div className="bg-white rounded-xl p-8 shadow-sm text-center">
                                        <div className="text-4xl mb-2">ğŸ“‹</div>
                                        <p className="text-gray-500 mb-4">ã¾ã å††ãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                                        <button
                                            onClick={() => setActiveTab('setup')}
                                            className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                        >
                                            è¨­å®šã‚¿ãƒ–ã§è¿½åŠ 
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {childCircles.map((circle, index) => {
                                            const compatibility = checkCompatibility(selectedParent, circle, circle.pattern);
                                            return (
                                                <div
                                                    key={index}
                                                    onClick={() => {
                                                        setSelectedCircleIndex(index);
                                                        setActiveTab('canvas');
                                                    }}
                                                    className={`bg-white rounded-xl p-4 shadow-sm cursor-pointer transition-all border-l-4 ${
                                                        compatibility.status === 'DANGER' ? 'border-red-500 bg-red-50' :
                                                        compatibility.status === 'WARNING' ? 'border-yellow-500 bg-yellow-50' :
                                                        'border-green-500'
                                                    } ${index === selectedCircleIndex ? 'ring-2 ring-blue-500' : 'hover:shadow-md'}`}
                                                >
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex-1">
                                                            <h3 className="font-medium text-gray-900">{circle.åç§°.split('ã€')[0]}</h3>
                                                            <p className="text-sm text-gray-600">{circle.ã‚¿ã‚¤ãƒ—}</p>
                                                            <p className="text-sm text-blue-600">
                                                                {circle.pattern === 'pattern1' ? 'æœ€å¤§å¤–å¾„' : 'ã‚·ãƒ£ãƒ•ãƒˆå¾„'}: {circle.activeSize}mm
                                                            </p>
                                                            <p className={`text-xs mt-1 ${
                                                                compatibility.status === 'DANGER' ? 'text-red-600' :
                                                                compatibility.status === 'WARNING' ? 'text-yellow-600' :
                                                                'text-green-600'
                                                            }`}>
                                                                {compatibility.message} ({compatibility.clearance.toFixed(2)}mm)
                                                            </p>
                                                            {circle.å‚™è€ƒ && (
                                                                <p className="text-xs text-yellow-700 bg-yellow-100 p-1 rounded mt-1">
                                                                    ğŸ’¡ {circle.å‚™è€ƒ.substring(0, 30)}...
                                                                </p>
                                                            )}
                                                        </div>
                                                        <div className="flex items-center space-x-2">
                                                            <span className={`w-3 h-3 rounded-full ${
                                                                circle.pattern === 'pattern1' ? 'bg-blue-500' : 'bg-green-500'
                                                            }`}></span>
                                                            {index === selectedCircleIndex && (
                                                                <span className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">é¸æŠä¸­</span>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                        
                                        {childCircles.length > 0 && (
                                            <button
                                                onClick={() => {
                                                    if (confirm(`é…ç½®æ¸ˆã¿ã®${childCircles.length}å€‹ã®å††ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                                                        setChildCircles([]);
                                                        setSelectedCircleIndex(null);
                                                    }
                                                }}
                                                className="w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                                            >
                                                ã™ã¹ã¦å‰Šé™¤
                                            </button>
                                        )}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¿ãƒ– */}
                        {activeTab === 'database' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-lg font-semibold text-gray-900">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†</h2>
                                        <span className="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">
                                            {database.length}ä»¶
                                        </span>
                                    </div>

                                    {/* æ¤œç´¢ãƒãƒ¼ */}
                                    <div className="mb-4">
                                        <input
                                            type="text"
                                            placeholder="åç§°ã‚„ã‚¿ã‚¤ãƒ—ã§æ¤œç´¢..."
                                            value={searchTerm}
                                            onChange={(e) => setSearchTerm(e.target.value)}
                                            className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"
                                        />
                                    </div>

                                    {/* ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒœã‚¿ãƒ³ */}
                                    <div className="flex space-x-2 mb-4">
                                        <button
                                            onClick={exportData}
                                            className="flex-1 py-3 px-3 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors"
                                        >
                                            ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                                        </button>
                                        <label className="flex-1 py-3 px-3 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors cursor-pointer text-center">
                                            ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                                            <input
                                                type="file"
                                                accept=".json"
                                                onChange={importData}
                                                className="hidden"
                                            />
                                        </label>
                                    </div>

                                    {/* å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿è­¦å‘Š */}
                                    <div className="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
                                        <h4 className="font-medium text-red-800 mb-2">âš ï¸ ãƒ‡ãƒ¼ã‚¿ã®å•é¡Œç‚¹</h4>
                                        <div className="text-sm text-red-700 space-y-1">
                                            <p>â€¢ EZ Guide 5.5Fr (1.3mm) ã«å¯¾ã—ã€å­å††ã‚‚1.3mmã®ã‚‚ã®ãŒå­˜åœ¨</p>
                                            <p>â€¢ Thrombusterâ…¡ 6Fr: 1.3mm</p>
                                            <p>â€¢ EZ Guide 5.5Frï¼ˆå­å††ï¼‰: 1.3mm</p>
                                            <p className="text-xs mt-2 bg-red-100 p-2 rounded">
                                                ç†è«–ä¸Šã€åŒã˜ã‚µã‚¤ã‚ºã§ã¯æŒ¿å…¥ä¸å¯èƒ½ã§ã™ã€‚å®Ÿéš›ã®ä½¿ç”¨ã§ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
                                            </p>
                                        </div>
                                    </div>

                                    {/* ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆ */}
                                    <div className="max-h-96 overflow-y-auto space-y-2">
                                        {filteredDatabase.map((item, index) => {
                                            // å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‹ãƒã‚§ãƒƒã‚¯
                                            const isProblematic = (
                                                (item.åç§°.includes('EZ Guide') && item.åç§°.includes('5.5Fr') && item.æœ€å¤§å¤–å¾„ === 1.3) ||
                                                (item.åç§°.includes('Thrombusterâ…¡ 6Fr') && item.æœ€å¤§å¤–å¾„ === 1.3)
                                            );
                                            
                                            return (
                                                <div key={index} className={`border rounded-lg p-3 ${
                                                    isProblematic ? 'border-red-300 bg-red-50' : 'border-gray-200'
                                                }`}>
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-2">
                                                                <span className={`w-2 h-2 rounded-full ${
                                                                    item.åˆ¤æ–­å†† === 'è¦ªå††' ? 'bg-blue-500' : 'bg-green-500'
                                                                }`}></span>
                                                                <span className="font-medium text-sm">{item.åç§°}</span>
                                                                {isProblematic && (
                                                                    <span className="text-xs bg-red-200 text-red-800 px-2 py-1 rounded">âš ï¸</span>
                                                                )}
                                                            </div>
                                                            <p className="text-xs text-gray-600">{item.ã‚¿ã‚¤ãƒ—}</p>
                                                            <p className="text-xs text-gray-500">
                                                                æœ€å¤§å¤–å¾„: {item.æœ€å¤§å¤–å¾„}mm
                                                                {item.ã‚·ãƒ£ãƒ•ãƒˆå¾„ && ` | ã‚·ãƒ£ãƒ•ãƒˆå¾„: ${item.ã‚·ãƒ£ãƒ•ãƒˆå¾„}mm`}
                                                            </p>
                                                            {item.å‚™è€ƒ && (
                                                                <p className="text-xs text-yellow-700 bg-yellow-100 p-1 rounded mt-1">
                                                                    ğŸ’¡ {item.å‚™è€ƒ.substring(0, 50)}...
                                                                </p>
                                                            )}
                                                            {isProblematic && (
                                                                <p className="text-xs text-red-600 bg-red-100 p-1 rounded mt-1">
                                                                    ğŸš¨ åŒå¾„ãƒ‡ãƒ¼ã‚¿ - æŒ¿å…¥ä¸å¯ã®å¯èƒ½æ€§
                                                                </p>
                                                            )}
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>

                                    {filteredDatabase.length === 0 && searchTerm && (
                                        <div className="text-center py-8">
                                            <div className="text-2xl mb-2">ğŸ”</div>
                                            <p className="text-gray-500 text-sm">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
                                        </div>
                                    )}
                                </div>

                                {/* çµ±è¨ˆæƒ…å ± */}
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <h3 className="text-lg font-semibold text-gray-900 mb-4">ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ</h3>
                                    <div className="grid grid-cols-2 gap-4 mb-4">
                                        <div className="text-center p-3 bg-blue-50 rounded-lg">
                                            <div className="text-2xl font-bold text-blue-600">{parentCircles.length}</div>
                                            <div className="text-sm text-blue-600">è¦ªå††</div>
                                        </div>
                                        <div className="text-center p-3 bg-green-50 rounded-lg">
                                            <div className="text-2xl font-bold text-green-600">{childCirclesData.length}</div>
                                            <div className="text-sm text-green-600">å­å††</div>
                                        </div>
                                    </div>
                                    
                                    {/* å•é¡Œãƒ‡ãƒ¼ã‚¿ã®çµ±è¨ˆ */}
                                    <div className="bg-red-50 rounded-lg p-3 mb-4">
                                        <h4 className="font-medium text-red-800 mb-2">å•é¡Œã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿</h4>
                                        <div className="text-sm text-red-700">
                                            <p>â€¢ åŒå¾„ãƒ‡ãƒ¼ã‚¿: 2ä»¶</p>
                                            <p>â€¢ ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹0mm: EZ Guide 5.5Frç³»</p>
                                        </div>
                                    </div>
                                    
                                    <div className="mt-4">
                                        <h4 className="font-medium text-gray-700 mb-2">ã‚¿ã‚¤ãƒ—åˆ¥çµ±è¨ˆ</h4>
                                        <div className="space-y-1 text-sm">
                                            {uniqueTypes.slice(0, 5).map(type => {
                                                const count = childCirclesData.filter(c => c.ã‚¿ã‚¤ãƒ— === type).length;
                                                return (
                                                    <div key={type} className="flex justify-between">
                                                        <span className="text-gray-600">{type}</span>
                                                        <span className="font-medium">{count}ä»¶</span>
                                                    </div>
                                                );
                                            })}
                                            {uniqueTypes.length > 5 && (
                                                <div className="text-xs text-gray-500 text-center pt-2">
                                                    ä»– {uniqueTypes.length - 5} ã‚¿ã‚¤ãƒ—
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>

                                {/* è§£æ±ºææ¡ˆ */}
                                <div className="bg-yellow-50 border border-yellow-200 rounded-xl p-6">
                                    <h3 className="text-lg font-semibold text-yellow-800 mb-4">ğŸ’¡ è§£æ±ºææ¡ˆ</h3>
                                    <div className="space-y-3 text-sm text-yellow-800">
                                        <div className="flex items-start space-x-3">
                                            <span className="text-lg">1ï¸âƒ£</span>
                                            <div>
                                                <p className="font-medium">ãƒ‡ãƒ¼ã‚¿ç²¾åº¦ã®å‘ä¸Š</p>
                                                <p>å°æ•°ç‚¹ç¬¬2ä½ã¾ã§æ¸¬å®šã—ã€çœŸã®å€¤ã‚’è¨˜éŒ²</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start space-x-3">
                                            <span className="text-lg">2ï¸âƒ£</span>
                                            <div>
                                                <p className="font-medium">æ¸¬å®šæ¡ä»¶ã®æ˜è¨˜</p>
                                                <p>ãƒ‡ãƒ•ãƒ¬ãƒ¼ãƒˆæ™‚ã€ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒˆæ™‚ãªã©çŠ¶æ…‹ã‚’æ˜è¨˜</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start space-x-3">
                                            <span className="text-lg">3ï¸âƒ£</span>
                                            <div>
                                                <p className="font-medium">å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ã®è¨­å®š</p>
                                                <p>æœ€å°0.1mmã®ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ã‚’ç¢ºä¿</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start space-x-3">
                                            <span className="text-lg">4ï¸âƒ£</span>
                                            <div>
                                                <p className="font-medium">ãƒ¡ãƒ¼ã‚«ãƒ¼ä»•æ§˜æ›¸ã®ç¢ºèª</p>
                                                <p>å…¬å¼ã®æŠ€è¡“ä»•æ§˜æ›¸ã§æ•°å€¤ã‚’å†ç¢ºèª</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        ReactDOM.render(<CircleCheckerPro />, document.getElementById('root'));
    </script>
</body>
</html>
