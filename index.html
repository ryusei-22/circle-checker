
                        ctx.fillText(`${circle.activeSize}mm`, circle.x + radius + 3, circle.y + 3);
                    }
                });
            };

            const getTouchPosition = (e, canvas) => {
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                
                return {
                    x: (clientX - rect.left) * (canvas.width / rect.width),
                    y: (clientY - rect.top) * (canvas.height / rect.height)
                };
            };

            const findCircleAtPosition = (x, y) => {
                const scaleFactor = getScaleFactor();
                for (let i = childCircles.length - 1; i >= 0; i--) {
                    const circle = childCircles[i];
                    const dx = x - circle.x;
                    const dy = y - circle.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const radius = Math.max(
                        MIN_VISIBLE_RADIUS,
                        (circle.activeSize * scaleFactor) / 2
                    );
                    
                    if (distance <= Math.max(radius + 5, 15)) { // æœ€å°ã‚¯ãƒªãƒƒã‚¯ç¯„å›²ã‚’ç¢ºä¿
                        return i;
                    }
                }
                return null;
            };

            const handleStart = (e) => {
                e.preventDefault();
                const canvas = canvasRef.current;
                if (!canvas) return;

                const pos = getTouchPosition(e, canvas);
                const circleIndex = findCircleAtPosition(pos.x, pos.y);
                
                if (circleIndex !== null) {
                    setSelectedCircleIndex(circleIndex);
                    setDragState({
                        isDragging: false,
                        dragIndex: circleIndex,
                        startPos: pos
                    });
                } else {
                    setSelectedCircleIndex(null);
                }
            };

            const handleMove = (e) => {
                e.preventDefault();
                if (dragState.dragIndex === null) return;

                const canvas = canvasRef.current;
                if (!canvas) return;

                const pos = getTouchPosition(e, canvas);
                const deltaX = pos.x - dragState.startPos.x;
                const deltaY = pos.y - dragState.startPos.y;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);

                if (!dragState.isDragging && distance > 3) {
                    setDragState(prev => ({ ...prev, isDragging: true }));
                }

                if (dragState.isDragging) {
                    const scaleFactor = getScaleFactor();
                    setChildCircles(prev => prev.map((circle, index) => {
                        if (index !== dragState.dragIndex) return circle;
                        
                        const radius = Math.max(MIN_VISIBLE_RADIUS, (circle.activeSize * scaleFactor) / 2);
                        const newX = Math.max(radius, Math.min(CANVAS_SIZE - radius, pos.x));
                        const newY = Math.max(radius, Math.min(CANVAS_SIZE - radius, pos.y));
                        
                        return { ...circle, x: newX, y: newY };
                    }));
                }
            };

            const handleEnd = (e) => {
                e.preventDefault();
                setDragState({
                    isDragging: false,
                    dragIndex: null,
                    startPos: { x: 0, y: 0 }
                });
            };

            const addNewDevice = () => {
                // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
                if (!newDeviceForm.åç§° || !newDeviceForm.ã‚¿ã‚¤ãƒ— || !newDeviceForm.æœ€å¤§å¤–å¾„) {
                    alert('åç§°ã€ã‚¿ã‚¤ãƒ—ã€æœ€å¤§å¤–å¾„ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                    return;
                }

                const maxDiameter = parseFloat(newDeviceForm.æœ€å¤§å¤–å¾„);
                const shaftDiameter = newDeviceForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„ ? parseFloat(newDeviceForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„) : undefined;

                if (isNaN(maxDiameter) || maxDiameter <= 0) {
                    alert('æœ€å¤§å¤–å¾„ã¯æ­£ã®æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (shaftDiameter !== undefined && (isNaN(shaftDiameter) || shaftDiameter <= 0)) {
                    alert('ã‚·ãƒ£ãƒ•ãƒˆå¾„ã¯æ­£ã®æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                // æ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
                const newDevice = {
                    åˆ¤æ–­å††: newDeviceForm.åˆ¤æ–­å††,
                    ã‚¿ã‚¤ãƒ—: newDeviceForm.ã‚¿ã‚¤ãƒ—,
                    åç§°: newDeviceForm.åç§°,
                    æœ€å¤§å¤–å¾„: maxDiameter
                };

                if (shaftDiameter) {
                    newDevice.ã‚·ãƒ£ãƒ•ãƒˆå¾„ = shaftDiameter;
                }

                if (newDeviceForm.å‚™è€ƒ) {
                    newDevice.å‚™è€ƒ = newDeviceForm.å‚™è€ƒ;
                }

                // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¿½åŠ 
                setDatabase(prev => [...prev, newDevice]);

                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
                setNewDeviceForm({
                    åˆ¤æ–­å††: 'å­å††',
                    ã‚¿ã‚¤ãƒ—: '',
                    åç§°: '',
                    æœ€å¤§å¤–å¾„: '',
                    ã‚·ãƒ£ãƒ•ãƒˆå¾„: '',
                    å‚™è€ƒ: ''
                });

                setShowAddForm(false);
                alert(`âœ… ã€Œ${newDevice.åç§°}ã€ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¿½åŠ ã—ã¾ã—ãŸï¼`);
            };

            const startEdit = (index, item) => {
                setEditingIndex(index);
                setEditForm({
                    åˆ¤æ–­å††: item.åˆ¤æ–­å††,
                    ã‚¿ã‚¤ãƒ—: item.ã‚¿ã‚¤ãƒ—,
                    åç§°: item.åç§°,
                    æœ€å¤§å¤–å¾„: item.æœ€å¤§å¤–å¾„.toString(),
                    ã‚·ãƒ£ãƒ•ãƒˆå¾„: item.ã‚·ãƒ£ãƒ•ãƒˆå¾„ ? item.ã‚·ãƒ£ãƒ•ãƒˆå¾„.toString() : '',
                    å‚™è€ƒ: item.å‚™è€ƒ || ''
                });
            };

            const saveEdit = (originalIndex) => {
                // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
                if (!editForm.åç§° || !editForm.ã‚¿ã‚¤ãƒ— || !editForm.æœ€å¤§å¤–å¾„) {
                    alert('åç§°ã€ã‚¿ã‚¤ãƒ—ã€æœ€å¤§å¤–å¾„ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                    return;
                }

                const maxDiameter = parseFloat(editForm.æœ€å¤§å¤–å¾„);
                const shaftDiameter = editForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„ ? parseFloat(editForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„) : undefined;

                if (isNaN(maxDiameter) || maxDiameter <= 0) {
                    alert('æœ€å¤§å¤–å¾„ã¯æ­£ã®æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (shaftDiameter !== undefined && (isNaN(shaftDiameter) || shaftDiameter <= 0)) {
                    alert('ã‚·ãƒ£ãƒ•ãƒˆå¾„ã¯æ­£ã®æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                // ç·¨é›†ã•ã‚ŒãŸãƒ‡ãƒã‚¤ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
                const updatedDevice = {
                    åˆ¤æ–­å††: editForm.åˆ¤æ–­å††,
                    ã‚¿ã‚¤ãƒ—: editForm.ã‚¿ã‚¤ãƒ—,
                    åç§°: editForm.åç§°,
                    æœ€å¤§å¤–å¾„: maxDiameter
                };

                if (shaftDiameter) {
                    updatedDevice.ã‚·ãƒ£ãƒ•ãƒˆå¾„ = shaftDiameter;
                }

                if (editForm.å‚™è€ƒ) {
                    updatedDevice.å‚™è€ƒ = editForm.å‚™è€ƒ;
                }

                // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ›´æ–°
                setDatabase(prev => prev.map((item, index) => 
                    index === originalIndex ? updatedDevice : item
                ));

                setEditingIndex(null);
                setEditForm({});
                alert(`âœ… ã€Œ${updatedDevice.åç§°}ã€ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼`);
            };

            const cancelEdit = () => {
                setEditingIndex(null);
                setEditForm({});
            };

            const deleteDevice = (index, item) => {
                if (confirm(`ã€Œ${item.åç§°}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                    setDatabase(prev => prev.filter((_, i) => i !== index));
                    alert(`âœ… ã€Œ${item.åç§°}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
                }
            };

            const handleAddCircle = () => {
                if (!selectedParent || !selectedName) return;

                const selectedCircle = childCirclesData.find(
                    circle => circle.åç§° === selectedName && circle.ã‚¿ã‚¤ãƒ— === selectedType
                );

                if (!selectedCircle) return;

                // é©åˆæ€§ãƒã‚§ãƒƒã‚¯
                const compatibility = checkCompatibility(selectedParent, selectedCircle, selectedPattern);
                
                const diameter = selectedPattern === 'pattern1' ? selectedCircle.æœ€å¤§å¤–å¾„ : (selectedCircle.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || selectedCircle.æœ€å¤§å¤–å¾„);
                
                const newCircle = {
                    ...selectedCircle,
                    x: CANVAS_SIZE / 2,
                    y: CANVAS_SIZE / 2,
                    pattern: selectedPattern,
                    activeSize: diameter,
                    compatibility: compatibility
                };
                
                setChildCircles(prev => [...prev, newCircle]);
                setSelectedCircleIndex(childCircles.length);
                setActiveTab('canvas');
            };

            const removeCircle = (index) => {
                setChildCircles(prev => prev.filter((_, i) => i !== index));
                if (selectedCircleIndex === index) {
                    setSelectedCircleIndex(null);
                } else if (selectedCircleIndex > index) {
                    setSelectedCircleIndex(prev => prev - 1);
                }
            };

            const togglePattern = () => {
                if (selectedCircleIndex === null) return;
                
                setChildCircles(prev => prev.map((circle, index) => {
                    if (index !== selectedCircleIndex) return circle;
                    
                    const newPattern = circle.pattern === 'pattern1' ? 'pattern2' : 'pattern1';
                    const newActiveSize = newPattern === 'pattern1' ? circle.æœ€å¤§å¤–å¾„ : (circle.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || circle.æœ€å¤§å¤–å¾„);
                    const newCompatibility = checkCompatibility(selectedParent, circle, newPattern);
                    
                    return {
                        ...circle,
                        pattern: newPattern,
                        activeSize: newActiveSize,
                        compatibility: newCompatibility
                    };
                }));
            };

            const exportData = () => {
                const dataStr = JSON.stringify(database, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'pci_database.json';
                link.click();
                URL.revokeObjectURL(url);
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const jsonData = JSON.parse(e.target.result);
                            setDatabase(jsonData);
                            alert('ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸï¼');
                        } catch (error) {
                            alert('ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            };

            const uniqueTypes = [...new Set(childCirclesData.map(circle => circle.ã‚¿ã‚¤ãƒ—))];
            const filteredByType = childCirclesData.filter(circle => circle.ã‚¿ã‚¤ãƒ— === selectedType);
            const selectedCircle = selectedCircleIndex !== null ? childCircles[selectedCircleIndex] : null;

            // æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            const filteredDatabase = database.filter(item => 
                item.åç§°.toLowerCase().includes(searchTerm.toLowerCase()) ||
                item.ã‚¿ã‚¤ãƒ—.toLowerCase().includes(searchTerm.toLowerCase())
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                    <header className="bg-white border-b border-gray-200 sticky top-0 z-50">
                        <div className="max-w-md mx-auto px-4 py-4">
                            <div className="flex items-center justify-between mb-4">
                                <h1 className="text-2xl font-semibold text-gray-900">Circle Checker Pro</h1>
                                <div className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium">
                                    æ‰‹å‹•é…ç½®ç‰ˆ
                                </div>
                            </div>
                            
                            {/* ã‚¿ãƒ– */}
                            <div className="flex bg-gray-100 rounded-lg p-1">
                                {[
                                    { id: 'setup', label: 'è¨­å®š', icon: 'âš™ï¸' },
                                    { id: 'canvas', label: 'é…ç½®', icon: 'ğŸ¯' },
                                    { id: 'list', label: 'ä¸€è¦§', icon: 'ğŸ“‹' },
                                    { id: 'database', label: 'DB', icon: 'ğŸ—„ï¸' }
                                ].map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`flex-1 py-2 px-2 rounded-md text-xs font-medium transition-all ${
                                            activeTab === tab.id
                                                ? 'bg-white text-blue-600 shadow-sm'
                                                : 'text-gray-600 hover:text-gray-900'
                                        }`}
                                    >
                                        <div className="flex flex-col items-center space-y-1">
                                            <span>{tab.icon}</span>
                                            <span>{tab.label}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </header>

                    <main className="max-w-md mx-auto px-4 py-6">

                        {/* è¨­å®šã‚¿ãƒ– */}
                        {activeTab === 'setup' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <h2 className="text-lg font-semibold text-gray-900 mb-4">å††ã®è¨­å®š</h2>
                                    
                                    <div className="space-y-4">
                                        {/* è¦ªå††é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">è¦ªå††</label>
                                            <select
                                                value={selectedParent?.åç§° || ''}
                                                onChange={(e) => {
                                                    const parent = parentCircles.find(p => p.åç§° === e.target.value);
                                                    setSelectedParent(parent);
                                                }}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {parentCircles.map((circle, index) => (
                                                    <option key={index} value={circle.åç§°}>
                                                        {circle.ã‚¿ã‚¤ãƒ—} - {circle.åç§°} ({circle.æœ€å¤§å¤–å¾„}mm)
                                                    </option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* ã‚¿ã‚¤ãƒ—é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ã‚¿ã‚¤ãƒ—</label>
                                            <select
                                                value={selectedType}
                                                onChange={(e) => {
                                                    setSelectedType(e.target.value);
                                                    setSelectedName('');
                                                }}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {uniqueTypes.map((type, index) => (
                                                    <option key={index} value={type}>{type}</option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* åç§°é¸æŠ */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">åç§°</label>
                                            <select
                                                value={selectedName}
                                                onChange={(e) => setSelectedName(e.target.value)}
                                                disabled={!selectedType}
                                                className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 text-base"
                                            >
                                                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                                {filteredByType.map((circle, index) => (
                                                    <option key={index} value={circle.åç§°}>
                                                        {circle.åç§°} ({circle.æœ€å¤§å¤–å¾„}mm)
                                                    </option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* é¸æŠã•ã‚ŒãŸå††ã®è©³ç´°æƒ…å ± */}
                                        {selectedName && (() => {
                                            const selectedDetail = filteredByType.find(c => c.åç§° === selectedName);
                                            return (
                                                <div className="bg-blue-50 rounded-lg p-4">
                                                    <h4 className="font-medium text-blue-900 mb-2">è©³ç´°æƒ…å ±</h4>
                                                    <div className="text-sm text-blue-800 space-y-1">
                                                        <p><strong>æœ€å¤§å¤–å¾„:</strong> {selectedDetail?.æœ€å¤§å¤–å¾„}mm</p>
                                                        {selectedDetail?.ã‚·ãƒ£ãƒ•ãƒˆå¾„ && (
                                                            <p><strong>ã‚·ãƒ£ãƒ•ãƒˆå¾„:</strong> {selectedDetail.ã‚·ãƒ£ãƒ•ãƒˆå¾„}mm</p>
                                                        )}
                                                        {selectedDetail?.å‚™è€ƒ && (
                                                            <p className="text-xs bg-yellow-100 text-yellow-800 p-2 rounded mt-2">
                                                                ğŸ’¡ {selectedDetail.å‚™è€ƒ}
                                                            </p>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })()}

                                        {/* ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠ */}
                                        {selectedName && (
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">ç›´å¾„ãƒ‘ã‚¿ãƒ¼ãƒ³</label>
                                                <div className="flex space-x-3">
                                                    <label className="flex-1">
                                                        <input
                                                            type="radio"
                                                            name="pattern"
                                                            value="pattern1"
                                                            checked={selectedPattern === 'pattern1'}
                                                            onChange={(e) => setSelectedPattern(e.target.value)}
                                                            className="sr-only"
                                                        />
                                                        <div className={`p-4 border-2 rounded-lg text-center cursor-pointer transition-all ${
                                                            selectedPattern === 'pattern1'
                                                                ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                                : 'border-gray-300 text-gray-700 hover:border-gray-400'
                                                        }`}>
                                                            <div className="text-xl mb-2">ğŸ”µ</div>
                                                            <div className="text-sm font-medium">æœ€å¤§å¤–å¾„</div>
                                                            <div className="text-xs text-gray-600">
                                                                {filteredByType.find(c => c.åç§° === selectedName)?.æœ€å¤§å¤–å¾„}mm
                                                            </div>
                                                        </div>
                                                    </label>
                                                    <label className="flex-1">
                                                        <input
                                                            type="radio"
                                                            name="pattern"
                                                            value="pattern2"
                                                            checked={selectedPattern === 'pattern2'}
                                                            onChange={(e) => setSelectedPattern(e.target.value)}
                                                            className="sr-only"
                                                        />
                                                        <div className={`p-4 border-2 rounded-lg text-center cursor-pointer transition-all ${
                                                            selectedPattern === 'pattern2'
                                                                ? 'border-green-500 bg-green-50 text-green-700'
                                                                : 'border-gray-300 text-gray-700 hover:border-gray-400'
                                                        }`}>
                                                            <div className="text-xl mb-2">ğŸŸ¢</div>
                                                            <div className="text-sm font-medium">ã‚·ãƒ£ãƒ•ãƒˆå¾„</div>
                                                            <div className="text-xs text-gray-600">
                                                                {filteredByType.find(c => c.åç§° === selectedName)?.ã‚·ãƒ£ãƒ•ãƒˆå¾„ || 'N/A'}mm
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>
                                            </div>
                                        )}

                                        <button
                                            onClick={handleAddCircle}
                                            disabled={!selectedParent || !selectedName}
                                            className="w-full py-4 px-4 rounded-lg font-medium text-lg transition-colors bg-blue-500 hover:bg-blue-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed"
                                        >
                                            å††ã‚’è¿½åŠ 
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* é…ç½®ã‚¿ãƒ– */}
                        {activeTab === 'canvas' && (
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl p-6 shadow-sm">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-lg font-semibold text-gray-900">é…ç½®å›³</h2>
                                        {childCircles.length > 0 && (
                                            <span className="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
                                                {childCircles.length}å€‹
                                            </span>
                                        )}
                                    </div>
                                    
                                    <div className="flex justify-center mb-4 relative">
                                        {/* æ­£ç¢ºè¡¨ç¤ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */}
                                        <div className="accurate-indicator">
                                            ğŸ“ æ­£ç¢ºã‚µã‚¤ã‚º
                                        </div>

                                        <canvas
                                            ref={canvasRef}
                                            onTouchStart={handleStart}
                                            onTouchMove={handleMove}
                                            onTouchEnd={handleEnd}
                                            onMouseDown={handleStart}
                                            onMouseMove={handleMove}
                                            onMouseUp={handleEnd}
                                            onMouseLeave={handleEnd}
                                            className="border border-gray-200 rounded-lg bg-white cursor-pointer touch-none"
                                            style={{ maxWidth: '100%', height: 'auto' }}
                                        />
                                    </div>

                                    {childCircles.length === 0 && (
                                        <div className="text-center py-8">
                                            <div className="text-4xl mb-2">â­•</div>
                                            <p className="text-gray-500 text-sm mb-2">è¨­å®šã‚¿ãƒ–ã§å††ã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>
                                            <p className="text-gray-400 text-xs">å††ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é¸æŠãƒ»ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•</p>
                                            <div className="mt-4 p-3 bg-blue-50 rounded-lg text-xs text-blue-800">
                                                ğŸ¯ æ‰‹å‹•ã§å††ã‚’é…ç½®ã—ã¦é‡ãªã‚Šã‚’ç¢ºèªã§ãã¾ã™
                                            </div>
                                        </div>
                                    )}
                                    
                                </div>

                                {/* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */}
                                {selectedCircle && (
                                    <div className="bg-white rounded-xl p-6 shadow-sm">
                                        <h3 className="text-lg font-semibold text-gray-900 mb-4">é¸æŠä¸­ã®å††</h3>
                                        <div className="bg-gray-50 rounded-lg p-4 mb-4">
                                            <p className="font-medium text-gray-900">{selectedCircle.åç§°.split('ã€')[0]}</p>
                                            <p className="text-sm text-gray-600">
                                                {selectedCircle.pattern === 'pattern1' ? 'æœ€å¤§å¤–å¾„' : 'ã‚·ãƒ£ãƒ•ãƒˆå¾„'}: {selectedCircle.activeSize}mm
                                            </p>
                                            
                                            {/* é©åˆæ€§è¡¨ç¤ºï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é‡ãªã‚Šæ¤œå‡ºï¼‰ */}
                                            {(() => {
                                                const circlesWithOverlapInfo = detectOverlaps(childCircles);
                                                const currentCircleInfo = circlesWithOverlapInfo[selectedCircleIndex];
                                                
                                                if (!currentCircleInfo) return null;

                                                let statusMessage, statusColor;
                                                if (currentCircleInfo.isOutsideParent) {
                                                    statusMessage = 'âš ï¸ è¦ªå††ã‹ã‚‰ã¯ã¿å‡ºã—';
                                                    statusColor = 'bg-red-100 text-red-800';
                                                } else if (currentCircleInfo.hasCircleOverlap) {
                                                    statusMessage = 'âš ï¸ å­å††åŒå£«ãŒé‡ãªã‚Š';
                                                    statusColor = 'bg-orange-100 text-orange-800';
                                                } else if (currentCircleInfo.compatibility.status === 'DANGER') {
                                                    statusMessage = 'âš ï¸ é©åˆæ€§å±é™º';
                                                    statusColor = 'bg-red-100 text-red-800';
                                                } else if (currentCircleInfo.compatibility.status === 'WARNING') {
                                                    statusMessage = 'âš ï¸ é©åˆæ€§æ³¨æ„';
                                                    statusColor = 'bg-yellow-100 text-yellow-800';
                                                } else {
                                                    statusMessage = 'âœ… æ­£å¸¸';
                                                    statusColor = 'bg-green-100 text-green-800';
                                                }

                                                return (
                                                    <div className={`mt-2 p-2 rounded text-xs ${statusColor}`}>
                                                        {statusMessage}
                                                    </div>
                                                );
                                            })()}
                                            
                                            {selectedCircle.å‚™è€ƒ && (
                                                <p className="text-xs text-yellow-700 bg-yellow-100 p-2 rounded mt-2">
                                                    ğŸ’¡ {selectedCircle.å‚™è€ƒ}
                                                </p>
                                            )}
                                        </div>

                                        <div className="flex space-x-3">
                                            <button 
                                                onClick={togglePattern} 
                                                className="flex-1 bg-blue-100 hover:bg-blue-200 text-blue-700 py-4 px-4 rounded-lg font-medium transition-colors"
                                            >
                                                ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ‡æ›¿
                                            </button>
                                            <button
                                                onClick={() => removeCircle(selectedCircleIndex)}
                                                className="bg-red-500 hover:bg-red-600 text-white py-4 px-4 rounded-lg font-medium transition-colors"
                                            >
                                                å‰Šé™¤
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* ä¸€è¦§ã‚¿ãƒ– */}
                        {activeTab === 'list' && (
                            <div className="space-y-4">
                                <div className="flex items-center justify-between">
                                    <h2 className="text-lg font-semibold text-gray-900">é…ç½®æ¸ˆã¿å††ä¸€è¦§</h2>
                                    {childCircles.length > 0 && (
                                        <span className="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
                                            {childCircles.length}å€‹
                                        </span>
                                    )}
                                </div>

                                {childCircles.length === 0 ? (
                                    <div className="bg-white rounded-xl p-8 shadow-sm text-center">
                                        <div className="text-4xl mb-2">ğŸ“‹</div>
                                        <p className="text-gray-500 mb-4">ã¾ã å††ãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                                        <button
                                            onClick={() => setActiveTab('setup')}
                                            className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                        >
                                            è¨­å®šã‚¿ãƒ–ã§è¿½åŠ 
                                        </button>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {(() => {
                                            const circlesWithOverlapInfo = detectOverlaps(childCircles);
                                            
                                            return circlesWithOverlapInfo.map((circle, index) => {
                                                // çŠ¶æ…‹ã«å¿œã˜ãŸè‰²ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                                                let borderColor, bgColor, statusMessage;
                                                if (circle.isOutsideParent) {
                                                    borderColor = 'border-red-600';
                                                    bgColor = 'bg-red-100';
                                                    statusMessage = 'âš ï¸ è¦ªå††ã‹ã‚‰ã¯ã¿å‡ºã—';
                                                } else if (circle.hasCircleOverlap) {
                                                    borderColor = 'border-orange-400';
                                                    bgColor = 'bg-orange-100';
                                                    statusMessage = 'âš ï¸ å­å††åŒå£«ãŒé‡ãªã‚Š';
                                                } else if (circle.compatibility.status === 'DANGER') {
                                                    borderColor = 'border-red-500';
                                                    bgColor = 'bg-red-50';
                                                    statusMessage = 'âš ï¸ é©åˆæ€§å±é™º';
                                                } else if (circle.compatibility.status === 'WARNING') {
                                                    borderColor = 'border-yellow-500';
                                                    bgColor = 'bg-yellow-50';
                                                    statusMessage = 'âš ï¸ é©åˆæ€§æ³¨æ„';
                                                } else {
                                                    borderColor = 'border-green-500';
                                                    bgColor = '';
                                                    statusMessage = 'âœ… æ­£å¸¸';
                                                }

                                                return (
                                                    <div
                                                        key={index}
                                                        onClick={() => {
                                                            setSelectedCircleIndex(index);
                                                            setActiveTab('canvas');
                                                        }}
                                                        className={`bg-white rounded-xl p-4 shadow-sm cursor-pointer transition-all border-l-4 ${borderColor} ${bgColor} ${index === selectedCircleIndex ? 'ring-2 ring-blue-500' : 'hover:shadow-md'}`}
                                                    >
                                                        <div className="flex items-center justify-between">
                                                            <div className="flex-1">
                                                                <h3 className="font-medium text-gray-900">{circle.åç§°.split('ã€')[0]}</h3>
                                                                <p className="text-sm text-gray-600">{circle.ã‚¿ã‚¤ãƒ—}</p>
                                                                <p className="text-sm text-blue-600">
                                                                    {circle.pattern === 'pattern1' ? 'æœ€å¤§å¤–å¾„' : 'ã‚·ãƒ£ãƒ•ãƒˆå¾„'}: {circle.activeSize}mm
                                                                </p>
                                                                <p className={`text-xs mt-1 font-medium ${
                                                                    circle.isOutsideParent || circle.hasCircleOverlap ? 'text-red-600' :
                                                                    circle.compatibility.status === 'DANGER' ? 'text-red-600' :
                                                                    circle.compatibility.status === 'WARNING' ? 'text-yellow-600' :
                                                                    'text-green-600'
                                                                }`}>
                                                                    {statusMessage}
                                                                </p>
                                                                {circle.å‚™è€ƒ && (
                                                                    <p className="text-xs text-yellow-700 bg-yellow-100 p-1 rounded mt-1">
                                                                        ğŸ’¡ {circle.å‚™è€ƒ.substring(0, 30)}...
                                                                    </p>
                                                                )}
                                                            </div>
                                                            <div className="flex items-center space-x-2">
                                                                <span className={`w-3 h-3 rounded-full ${
                                                                    circle.pattern === 'pattern1' ? 'bg-blue-500' : 'bg-green-500'
                                                                }`}></span>
                                                                {index === selectedCircleIndex && (
                                                                    <span className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">é¸æŠä¸­</span>
                                                                )}
                                                            </div>
                                                        </div>
                                                    </div>
                                                );
                                            });
                                        })()}
                                        
                                        {childCircles.length > 0 && (
                                            <button
                                                onClick={() => {
                                                    if (confirm(`é…ç½®æ¸ˆã¿ã®${childCircles.length}å€‹ã®å††ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                                                        setChildCircles([]);
                                                        setSelectedCircleIndex(null);
                                                    }
                                                }}
                                                className="w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                                            >
                                                ã™ã¹ã¦å‰Šé™¤
                                            </button>
                                        )}
                                    </div>
                                )}
                            </div>
                        )}

                        {/* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¿ãƒ– */}
                        {activeTab === 'database' && (
                            <div className="bg-white rounded-xl p-6 shadow-sm">
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-lg font-semibold text-gray-900">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†</h2>
                                    <span className="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">
                                        {database.length}ä»¶
                                    </span>
                                </div>

                                {/* æ¤œç´¢ãƒ»ç®¡ç†ãƒœã‚¿ãƒ³ */}
                                <div className="mb-4">
                                    <input
                                        type="text"
                                        placeholder="åç§°ã‚„ã‚¿ã‚¤ãƒ—ã§æ¤œç´¢..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base mb-3"
                                    />
                                    
                                    <div className="flex space-x-2">
                                        <button
                                            onClick={() => setShowAddForm(true)}
                                            className="flex-1 py-2 px-3 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors"
                                        >
                                            â• æ–°è¦è¿½åŠ 
                                        </button>
                                        <button
                                            onClick={exportData}
                                            className="flex-1 py-2 px-3 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors"
                                        >
                                            ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                                        </button>
                                        <label className="flex-1 py-2 px-3 bg-purple-500 text-white rounded-lg text-sm hover:bg-purple-600 transition-colors cursor-pointer text-center">
                                            ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                                            <input
                                                type="file"
                                                accept=".json"
                                                onChange={importData}
                                                className="hidden"
                                            />
                                        </label>
                                    </div>
                                </div>

                                {/* æ–°è¦ãƒ‡ãƒã‚¤ã‚¹è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  */}
                                {showAddForm && (
                                    <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                        <div className="flex items-center justify-between mb-4">
                                            <h4 className="font-medium text-blue-800">æ–°ã—ã„ãƒ‡ãƒã‚¤ã‚¹ã‚’è¿½åŠ </h4>
                                            <button
                                                onClick={() => setShowAddForm(false)}
                                                className="text-blue-600 hover:text-blue-800"
                                            >
                                                âœ•
                                            </button>
                                        </div>
                                        
                                        <div className="space-y-3">
                                            <div className="grid grid-cols-2 gap-2">
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">åˆ¤æ–­å††</label>
                                                    <select
                                                        value={newDeviceForm.åˆ¤æ–­å††}
                                                        onChange={(e) => setNewDeviceForm(prev => ({ ...prev, åˆ¤æ–­å††: e.target.value }))}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                    >
                                                        <option value="è¦ªå††">è¦ªå††</option>
                                                        <option value="å­å††">å­å††</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">ã‚¿ã‚¤ãƒ— *</label>
                                                    <input
                                                        type="text"
                                                        value={newDeviceForm.ã‚¿ã‚¤ãƒ—}
                                                        onChange={(e) => setNewDeviceForm(prev => ({ ...prev, ã‚¿ã‚¤ãƒ—: e.target.value }))}
                                                        placeholder="ãƒãƒ«ãƒ¼ãƒ³ã€”SCã€•"
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                    />
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">åç§° *</label>
                                                <input
                                                    type="text"
                                                    value={newDeviceForm.åç§°}
                                                    onChange={(e) => setNewDeviceForm(prev => ({ ...prev, åç§°: e.target.value }))}
                                                    placeholder="Ryureiã€2.50-3.50mmã€‘"
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                />
                                            </div>

                                            <div className="grid grid-cols-2 gap-2">
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">æœ€å¤§å¤–å¾„(mm) *</label>
                                                    <input
                                                        type="number"
                                                        step="0.001"
                                                        value={newDeviceForm.æœ€å¤§å¤–å¾„}
                                                        onChange={(e) => setNewDeviceForm(prev => ({ ...prev, æœ€å¤§å¤–å¾„: e.target.value }))}
                                                        placeholder="0.87"
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                    />
                                                </div>
                                                {newDeviceForm.åˆ¤æ–­å†† === 'å­å††' && (
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-700 mb-1">ã‚·ãƒ£ãƒ•ãƒˆå¾„(mm)</label>
                                                        <input
                                                            type="number"
                                                            step="0.001"
                                                            value={newDeviceForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„}
                                                            onChange={(e) => setNewDeviceForm(prev => ({ ...prev, ã‚·ãƒ£ãƒ•ãƒˆå¾„: e.target.value }))}
                                                            placeholder="0.64"
                                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                        />
                                                    </div>
                                                )}
                                            </div>

                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">å‚™è€ƒ</label>
                                                <input
                                                    type="text"
                                                    value={newDeviceForm.å‚™è€ƒ}
                                                    onChange={(e) => setNewDeviceForm(prev => ({ ...prev, å‚™è€ƒ: e.target.value }))}
                                                    placeholder="é©å¿œGC :6Fr"
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                                                />
                                            </div>

                                            <div className="flex space-x-2 pt-2">
                                                <button
                                                    onClick={addNewDevice}
                                                    className="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"
                                                >
                                                    è¿½åŠ 
                                                </button>
                                                <button
                                                    onClick={() => setShowAddForm(false)}
                                                    className="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition-colors text-sm"
                                                >
                                                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* ãƒ‡ãƒ¼ã‚¿ãƒªã‚¹ãƒˆ */}
                                <div className="space-y-2">
                                    {filteredDatabase.map((item, originalIndex) => {
                                        const actualIndex = database.findIndex(dbItem => 
                                            dbItem.åç§° === item.åç§° && 
                                            dbItem.ã‚¿ã‚¤ãƒ— === item.ã‚¿ã‚¤ãƒ— && 
                                            dbItem.æœ€å¤§å¤–å¾„ === item.æœ€å¤§å¤–å¾„
                                        );
                                        
                                        const isEditing = editingIndex === actualIndex;
                                        
                                        return (
                                            <div key={`${actualIndex}-${item.åç§°}`} className={`border rounded-lg p-3 ${isEditing ? 'ring-2 ring-blue-500 border-blue-300' : 'border-gray-200 hover:border-gray-300'} transition-all`}>
                                                {isEditing ? (
                                                    /* ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ  */
                                                    <div className="space-y-3">
                                                        <div className="flex items-center justify-between mb-2">
                                                            <h4 className="font-medium text-blue-800 text-sm">ãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†</h4>
                                                            <button
                                                                onClick={cancelEdit}
                                                                className="text-gray-600 hover:text-gray-800 text-sm"
                                                            >
                                                                âœ•
                                                            </button>
                                                        </div>
                                                        
                                                        <div className="grid grid-cols-2 gap-2">
                                                            <div>
                                                                <label className="block text-xs font-medium text-gray-700 mb-1">åˆ¤æ–­å††</label>
                                                                <select
                                                                    value={editForm.åˆ¤æ–­å††}
                                                                    onChange={(e) => setEditForm(prev => ({ ...prev, åˆ¤æ–­å††: e.target.value }))}
                                                                    className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                                >
                                                                    <option value="è¦ªå††">è¦ªå††</option>
                                                                    <option value="å­å††">å­å††</option>
                                                                </select>
                                                            </div>
                                                            <div>
                                                                <label className="block text-xs font-medium text-gray-700 mb-1">ã‚¿ã‚¤ãƒ— *</label>
                                                                <input
                                                                    type="text"
                                                                    value={editForm.ã‚¿ã‚¤ãƒ—}
                                                                    onChange={(e) => setEditForm(prev => ({ ...prev, ã‚¿ã‚¤ãƒ—: e.target.value }))}
                                                                    className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                                />
                                                            </div>
                                                        </div>
                                                        
                                                        <div>
                                                            <label className="block text-xs font-medium text-gray-700 mb-1">åç§° *</label>
                                                            <input
                                                                type="text"
                                                                value={editForm.åç§°}
                                                                onChange={(e) => setEditForm(prev => ({ ...prev, åç§°: e.target.value }))}
                                                                className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                            />
                                                        </div>
                                                        
                                                        <div className="grid grid-cols-2 gap-2">
                                                            <div>
                                                                <label className="block text-xs font-medium text-gray-700 mb-1">æœ€å¤§å¤–å¾„(mm) *</label>
                                                                <input
                                                                    type="number"
                                                                    step="0.001"
                                                                    value={editForm.æœ€å¤§å¤–å¾„}
                                                                    onChange={(e) => setEditForm(prev => ({ ...prev, æœ€å¤§å¤–å¾„: e.target.value }))}
                                                                    className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                                />
                                                            </div>
                                                            {editForm.åˆ¤æ–­å†† === 'å­å††' && (
                                                                <div>
                                                                    <label className="block text-xs font-medium text-gray-700 mb-1">ã‚·ãƒ£ãƒ•ãƒˆå¾„(mm)</label>
                                                                    <input
                                                                        type="number"
                                                                        step="0.001"
                                                                        value={editForm.ã‚·ãƒ£ãƒ•ãƒˆå¾„}
                                                                        onChange={(e) => setEditForm(prev => ({ ...prev, ã‚·ãƒ£ãƒ•ãƒˆå¾„: e.target.value }))}
                                                                        className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                                    />
                                                                </div>
                                                            )}
                                                        </div>
                                                        
                                                        <div>
                                                            <label className="block text-xs font-medium text-gray-700 mb-1">å‚™è€ƒ</label>
                                                            <input
                                                                type="text"
                                                                value={editForm.å‚™è€ƒ}
                                                                onChange={(e) => setEditForm(prev => ({ ...prev, å‚™è€ƒ: e.target.value }))}
                                                                className="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                                                            />
                                                        </div>
                                                        
                                                        <div className="flex space-x-2 pt-2">
                                                            <button
                                                                onClick={() => saveEdit(actualIndex)}
                                                                className="flex-1 bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded font-medium transition-colors text-xs"
                                                            >
                                                                ä¿å­˜
                                                            </button>
                                                            <button
                                                                onClick={cancelEdit}
                                                                className="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-1 px-3 rounded font-medium transition-colors text-xs"
                                                            >
                                                                ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                                                            </button>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    /* é€šå¸¸è¡¨ç¤º */
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-2 mb-1">
                                                                <span className={`w-2 h-2 rounded-full ${
                                                                    item.åˆ¤æ–­å†† === 'è¦ªå††' ? 'bg-blue-500' : 'bg-green-500'
                                                                }`}></span>
                                                                <span className="font-medium text-sm">{item.åç§°}</span>
                                                            </div>
                                                            <div className="text-xs text-gray-600 space-y-0.5">
                                                                <p><span className="font-medium">ã‚¿ã‚¤ãƒ—:</span> {item.ã‚¿ã‚¤ãƒ—}</p>
                                                                <p>
                                                                    <span className="font-medium">æœ€å¤§å¤–å¾„:</span> {item.æœ€å¤§å¤–å¾„}mm
                                                                    {item.ã‚·ãƒ£ãƒ•ãƒˆå¾„ && <span className="ml-2"><span className="font-medium">ã‚·ãƒ£ãƒ•ãƒˆå¾„:</span> {item.ã‚·ãƒ£ãƒ•ãƒˆå¾„}mm</span>}
                                                                </p>
                                                                {item.å‚™è€ƒ && (
                                                                    <p className="text-yellow-700 bg-yellow-100 p-1 rounded">
                                                                        <span className="font-medium">å‚™è€ƒ:</span> {item.å‚™è€ƒ}
                                                                    </p>
                                                                )}
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center space-x-1 ml-2">
                                                            <button
                                                                onClick={() => startEdit(actualIndex, item)}
                                                                className="bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs font-bold"
                                                                title="ç·¨é›†"
                                                            >
                                                                âœï¸
                                                            </button>
                                                            <button
                                                                onClick={() => deleteDevice(actualIndex, item)}
                                                                className="bg-red-500 hover:bg-red-600 text-white p-1.5 rounded text-xs font-bold"
                                                                title="å‰Šé™¤"
                                                            >
                                                                ğŸ—‘ï¸
                                                            </button>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>

                                {filteredDatabase.length === 0 && searchTerm && (
                                    <div className="text-center py-8">
                                        <div className="text-2xl mb-2">ğŸ”</div>
                                        <p className="text-gray-500 text-sm">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        ReactDOM.render(<CircleCheckerPro />, document.getElementById('root'));
    </script>
</body>
